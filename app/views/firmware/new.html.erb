<h1>New firmware for repository</h1>

<% if FirmwareRepository.count > 0 %>
    <form accept-charset="UTF-8" action="/firmware/create" method="post">
        Authentication: <input type="text" name="firmware[authentication]" value="" /> <br>
        Target repository:
            <select id="repositories" name="firmware[project]"/>
                <%- FirmwareRepository.all.each do |repository| %>
                    <%- 
                        @doSelect = true if (request.query_parameters["id"].to_i == repository.id)
                        @repId = repository.id
                        @repName = repository.project
                        @selectObject = '' %>

                    <option <%= 'selected' if @doSelect %> value="<%= @repId %>"><%= @repName %> (ID: <%= @repId %>)</option>
                <%- end %>
            </select><br>
        Version number: <input type="text" name="firmware[version_number]" value="" /> <br>
        Release type: <input type="text" name="firmware[release_type]" value="" /> <br>
        Publish: <input type="checkbox" id="releaseCheck" name="firmware[for_release]" checked="true"><br>
        <input type="submit">
    </form>
<% else %>
    <b>No firmware repositories have been set up yet.</b><br>
    <a href="/repository/new">Create new</a>
<% end %>